<div class="blog-detail-container">
  @if (isLoading()) {
    <div class="loading-container" role="status" aria-live="polite">
      <div class="spinner" aria-label="Loading blog post"></div>
      <p class="loading-text">Loading blog post...</p>
    </div>
  }

  @if (error(); as error) {
    <div class="error-container" role="alert">
      <mat-icon class="error-icon">warning</mat-icon>
      <p class="error-text">{{ error }}</p>
      <button (click)="goBack()" class="back-btn" type="button">← Back to Blog</button>
    </div>
  }

  @if (blog(); as blog) {
    <article class="blog-article">
      @if (blog.featured_image) {
        <div class="featured-image" 
             [style.background-image]="'url(' + blog.featured_image + ')'"
             role="img"
             [attr.aria-label]="'Featured image for ' + blog.title">
        </div>
      }

      <header class="blog-header">
        <h1 class="blog-title">{{ blog.title }}</h1>
        
        <div class="blog-meta" role="contentinfo" aria-label="Blog post metadata">
          <div class="meta-item">
            <mat-icon class="meta-icon">person</mat-icon>
            <span>{{ blog.author.name }}</span>
          </div>
          
          <div class="meta-item">
            <mat-icon class="meta-icon">event</mat-icon>
            <time [attr.datetime]="blog.published_at">{{ formatDate(blog.published_at) }}</time>
          </div>
          
          <div class="meta-item">
            <mat-icon class="meta-icon">schedule</mat-icon>
            <span>{{ getReadingTime(blog.content) }}</span>
          </div>
          
          <div class="meta-item">
            <mat-icon class="meta-icon">visibility</mat-icon>
            <span>{{ blog.views_count }} views</span>
          </div>
        </div>

        @if (blog.excerpt) {
          <p class="blog-excerpt">{{ blog.excerpt }}</p>
        }
      </header>

      <div class="blog-content" [innerHTML]="blog.content"></div>

      <footer class="blog-footer">
        <button (click)="goBack()" class="back-btn-bottom" type="button">
          ← Back to Blog
        </button>
      </footer>
    </article>
  }
</div>
